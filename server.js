const express=require("express"),favicon=require("express-favicon"),path=require("path"),RewriteMiddleware=require("express-htaccess-middleware"),RewriteOptions={file:path.resolve(__dirname,".htaccess"),verbose:"development"===process.env.ENV_NODE,watch:"development"===process.env.ENV_NODE},port=process.env.PORT||3e3,app=express();app.use(favicon(__dirname+"/icon/favicon.png")),app.use(RewriteMiddleware(RewriteOptions)),app.enable("trust proxy"),app.use(((e,r,s)=>{e.secure?s():r.redirect("https://"+e.headers.host+e.url)})),app.use(express.static(__dirname)),app.use(express.static(path.join(__dirname))),app.get("*",(function(e,r){e.accepts("html")&&r.send("404",'<script>location.href = "/error/index.html";<\/script>')})),app.listen(port);